{"onIterate":"go","onStart":"setup","targetFrameRate":20,"roles":[{"afterDisconnect":null,"canJoinMidRun":true,"isSpectator":true,"limit":1,"highlightMainColor":"#008000","name":"teacher","namePlural":"teachers","onConnect":null,"onCursorClick":null,"onCursorMove":null,"onCursorRelease":null,"onDisconnect":null,"perspectiveVar":null,"viewOverrideVar":null,"widgets":[{"bottom":709,"left":190,"right":898,"top":0,"type":"hnwView","height":448,"width":700},{"bottom":98,"left":7,"right":179,"top":65,"type":"hnwSlider","default":65,"direction":"horizontal","display":"number-of-cars","max":"200","min":"1","step":1,"variable":"number-of-cars"},{"bottom":176,"left":8,"right":180,"top":143,"type":"hnwSlider","default":26,"direction":"horizontal","display":"radius","max":"30","min":"11","step":1,"variable":"radius"},{"bottom":48,"left":928,"right":1100,"top":15,"type":"hnwSlider","default":100,"direction":"horizontal","display":"InitialSpeed","max":"100","min":"0","step":1,"variable":"initialspeed"},{"bottom":88,"left":929,"right":1101,"top":55,"type":"hnwSlider","default":1,"direction":"horizontal","display":"acceleration","max":"2","min":"0","step":0.1,"variable":"acceleration"},{"bottom":126,"left":930,"right":1102,"top":93,"type":"hnwSlider","default":1,"direction":"horizontal","display":"deceleration","max":"2","min":"0","step":0.1,"variable":"deceleration"},{"bottom":210,"left":1119,"right":1480,"top":11,"type":"hnwPlot","autoPlotOn":true,"display":"AverageSpeed","legendOn":true,"pens":[{"type":"pen","display":"MaxSpeed","interval":1,"mode":0,"color":-13345367,"inLegend":true,"setupCode":"","updateCode":""},{"type":"pen","display":"MinSpeed","interval":1,"mode":0,"color":-10899396,"inLegend":true,"setupCode":"","updateCode":""}],"setupCode":"","updateCode":"noop","xAxis":"ticks","xmax":10,"xmin":0,"yAxis":"Speed","ymax":50,"ymin":0},{"bottom":479,"left":933,"right":1095,"top":446,"type":"hnwSwitch","display":"ShowSlowestPoint?","on":false,"variable":"showslowestpoint?"},{"bottom":394,"left":931,"right":1103,"top":361,"type":"hnwSlider","default":100,"direction":"horizontal","display":"MaxSpeed","max":"100","min":"0","step":1,"variable":"maxspeed"},{"bottom":436,"left":931,"right":1103,"top":403,"type":"hnwSlider","default":1,"direction":"horizontal","display":"allowance","max":"20","min":"0","step":1,"variable":"allowance"},{"bottom":316,"left":931,"right":1103,"top":283,"type":"hnwSlider","default":5,"direction":"horizontal","display":"speed-parameter","max":"15","min":"0","step":1,"variable":"speed-parameter"},{"bottom":239,"left":931,"right":1071,"top":206,"type":"hnwSwitch","display":"allow-accident?","on":true,"variable":"allow-accident?"},{"bottom":355,"left":931,"right":1103,"top":322,"type":"hnwSlider","default":22,"direction":"horizontal","display":"extra-lane-length","max":"40","min":"0","step":1,"variable":"extra-lane-length"},{"bottom":201,"left":930,"right":1111,"top":168,"type":"hnwSwitch","display":"androids-change-lane?","on":false,"variable":"androids-change-lane?"},{"bottom":693,"left":1160,"right":1302,"top":660,"type":"hnwSlider","default":99,"direction":"horizontal","display":"change-lane-x-of-100","max":"99","min":"0","step":1,"variable":"change-lane-x-of-100"},{"bottom":628,"left":925,"right":1048,"top":585,"type":"hnwMonitor","display":"Run Time (Seconds)","fontSize":10,"precision":0,"reporterStyle":"global-var","source":"runtime"},{"bottom":163,"left":930,"right":1102,"top":130,"type":"hnwSlider","default":4,"direction":"horizontal","display":"DistanceFromCar","max":"6","min":"1","step":1,"variable":"distancefromcar"},{"bottom":570,"left":945,"right":1045,"top":510,"type":"hnwInputBox","boxedValue":{"type":"Number","multiline":true,"value":1},"variable":"requiredlaps"},{"bottom":688,"left":925,"right":1048,"top":645,"type":"hnwMonitor","display":"average speed","fontSize":10,"precision":0,"reporterStyle":"procedure","source":"average-speed"},{"bottom":253,"left":13,"right":86,"top":202,"type":"hnwButton","actionKey":null,"buttonKind":"procedure","disableUntilTicksStart":false,"display":"ZoomIn","forever":false,"hnwProcName":"zoomin"},{"bottom":253,"left":87,"right":169,"top":202,"type":"hnwButton","actionKey":null,"buttonKind":"procedure","disableUntilTicksStart":false,"display":"ZoomOut","forever":false,"hnwProcName":"zoomout"},{"bottom":138,"left":7,"right":179,"top":105,"type":"hnwSlider","default":1,"direction":"horizontal","display":"number-of-trucks","max":"200","min":"1","step":1,"variable":"number-of-trucks"},{"bottom":278,"left":931,"right":1073,"top":245,"type":"hnwSwitch","display":"speed-limit?","on":false,"variable":"speed-limit?"},{"bottom":410,"left":1120,"right":1480,"top":230,"type":"hnwPlot","autoPlotOn":true,"display":"Speed Histogram","legendOn":false,"pens":[{"color":-13345367,"display":"dist","inLegend":true,"interval":1,"mode":1,"setupCode":"","type":"pen","updateCode":""},{"color":-7500403,"display":"avg-speed","inLegend":true,"interval":1,"mode":0,"setupCode":"","type":"pen","updateCode":""}],"setupCode":"teacher-setup-speed-histogram","updateCode":"teacher-update-speed-histogram","xAxis":"Speed","xmax":10,"xmin":0,"yAxis":"Count","ymax":10,"ymin":0},{"bottom":630,"left":1120,"right":1480,"top":445,"type":"hnwPlot","autoPlotOn":true,"display":"Distance Histogram","legendOn":false,"pens":[{"color":-13345367,"display":"dist","inLegend":true,"interval":1,"mode":1,"setupCode":"","type":"pen","updateCode":""},{"color":-7500403,"display":"avg-laps","inLegend":true,"interval":1,"mode":0,"setupCode":"","type":"pen","updateCode":""}],"setupCode":"teacher-setup-distance-histogram","updateCode":"teacher-update-distance-histogram","xAxis":"Laps","xmax":10,"xmin":0,"yAxis":"Count","ymax":10,"ymin":0},{"bottom":620,"left":5,"right":170,"top":575,"type":"hnwButton","actionKey":null,"buttonKind":"procedure","disableUntilTicksStart":false,"display":"Save Init CSV","forever":false,"hnwProcName":"save-init-csv"},{"bottom":680,"left":5,"right":170,"top":635,"type":"hnwButton","actionKey":null,"buttonKind":"procedure","disableUntilTicksStart":false,"display":"Save Run CSV","forever":false,"hnwProcName":"save-run-csv"}]},{"afterDisconnect":"remove-student","canJoinMidRun":true,"isSpectator":false,"limit":-1,"highlightMainColor":"#008000","name":"student","namePlural":"students","onConnect":"on-connect","onCursorClick":null,"onCursorMove":null,"onCursorRelease":null,"onDisconnect":null,"perspectiveVar":"client-perspective","viewOverrideVar":null,"widgets":[{"bottom":729,"left":390,"right":1098,"top":20,"type":"hnwView","height":700,"width":700},{"bottom":220,"left":80,"right":180,"top":180,"type":"hnwButton","actionKey":"I","buttonKind":"turtle-procedure","disableUntilTicksStart":false,"display":"speed up","forever":false,"hnwProcName":"cmd-speed-up"},{"bottom":350,"left":75,"right":170,"top":305,"type":"hnwButton","actionKey":"K","buttonKind":"turtle-procedure","disableUntilTicksStart":false,"display":"speed down","forever":false,"hnwProcName":"cmd-speed-down"},{"bottom":280,"left":10,"right":100,"top":245,"type":"hnwButton","actionKey":"L","buttonKind":"turtle-procedure","disableUntilTicksStart":false,"display":"left","forever":false,"hnwProcName":"cmd-left"},{"bottom":285,"left":150,"right":245,"top":245,"type":"hnwButton","actionKey":"R","buttonKind":"turtle-procedure","disableUntilTicksStart":false,"display":"right","forever":false,"hnwProcName":"cmd-right"},{"bottom":53,"left":55,"right":190,"top":10,"type":"hnwMonitor","display":"OverallTime","fontSize":10,"precision":17,"reporterStyle":"turtle-var","source":"ui-overall-time"},{"bottom":108,"left":55,"right":190,"top":65,"type":"hnwMonitor","display":"Laps","fontSize":10,"precision":17,"reporterStyle":"turtle-var","source":"ui-laps"},{"bottom":163,"left":55,"right":190,"top":120,"type":"hnwMonitor","display":"Messege","fontSize":10,"precision":17,"reporterStyle":"turtle-var","source":"ui-message"},{"bottom":438,"left":15,"right":140,"top":395,"type":"hnwMonitor","display":"speed","fontSize":10,"precision":17,"reporterStyle":"turtle-var","source":"ui-speed"},{"bottom":231,"left":1150,"right":1545,"top":66,"type":"hnwPlot","autoPlotOn":true,"display":"My Speed Histogram","legendOn":false,"pens":[{"color":-13345367,"display":"speed","inLegend":true,"interval":1,"mode":0,"setupCode":"","type":"pen","updateCode":""}],"setupCode":"student-setup-my-speed-hist","updateCode":"student-update-my-speed-hist","xAxis":"Ticks","xmax":100,"xmin":0,"yAxis":"Speed","ymax":100,"ymin":0},{"bottom":480,"left":1155,"right":1550,"top":320,"type":"hnwPlot","autoPlotOn":true,"display":"My Distance Histogram","legendOn":false,"pens":[{"color":-7500403,"display":"distance","inLegend":true,"interval":1,"mode":0,"setupCode":"","type":"pen","updateCode":""}],"setupCode":"student-setup-my-distance-hist","updateCode":"student-update-my-distance-hist","xAxis":"Ticks","xmax":10,"xmin":0,"yAxis":"Laps","ymax":10,"ymin":0}]}],"type":"hubnet-web","version":"hnw-alpha-1","hnwNlogo":"\n; 1) Enable the extension that can save strings to a file in the browser\nextensions [ send-to ]\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; Variable and Breed declarations ;;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\nglobals [\n    ;; variables used to assign unique color and shape to clients\n    shape-names        ;; list that holds the names of the non-sick shapes a student's turtle can have\n    colors             ;; list that holds the colors used for students' turtles\n    color-names        ;; list that holds the names of the colors used for students' turtles\n    used-shape-colors  ;; list that holds the shape-color pairs that are already being used\n    max-possible-codes ;; total number of possible unique shape/color combinations\n    sample-car  Slowing-Point ;;to show slowest car\n    RunTime\n    ServerZoom-radius\n  \n  \twatched\n    \n    ;; ===== UI widgets (from Desktop/Authoring) =====\n    __hnw_teacher_radius\n    __hnw_teacher_extra-lane-length\n    __hnw_teacher_number-of-cars\n    __hnw_teacher_number-of-trucks\n    __hnw_teacher_InitialSpeed\n    __hnw_teacher_acceleration\n    __hnw_teacher_deceleration\n    __hnw_teacher_DistanceFromCar\n    __hnw_teacher_speed-parameter\n    __hnw_teacher_MaxSpeed\n    __hnw_teacher_allowance\n    __hnw_teacher_requiredlaps\n    __hnw_teacher_change-lane-x-of-100\n     \n    ;; switches\n    __hnw_teacher_androids-change-lane?    \n    __hnw_teacher_allow-accident?\n    __hnw_teacher_speed-limit?\n    __hnw_teacher_ShowSlowestPoint?\n  \n    ;; --- CSV logging (two files) ---\n    csv_init            ;; one-row \"world init\" CSV (header + one row)\n    csv_run             ;; multi-row \"per-student, per-second\" CSV (header + many rows)\n    csv_has_init?       ;; did we write the init header+row?\n    csv_has_run_header? ;; did we write the run header?\n    \n \n    ;; AverageSpeed plot meta\n    avg_xmin avg_xmax avg_ymin avg_ymax\n    avg_autoplot? avg_current_pen avg_legend_open? avg_num_pens\n    avg_penA_name avg_penA_mode avg_penA_interval avg_penA_color avg_penA_lastx\n    avg_penB_name avg_penB_mode avg_penB_interval avg_penB_color avg_penB_lastx\n    avg_penA_points  ;; list of [x y color penDown?]\n    avg_penB_points  ;; list of [x y color penDown?]\n\n  \n  \tCSV_SEP\n  \n    DEBUG? go-started? ui_hb       ;; ui_hb = once-per-second heartbeat counter\n]\n\n\n\nturtles-own [\n  speed        ;; hold the turtle speed\n  speed-limit  ;; hold the turtle max speed\n  speed-min    ;; hold the turtle min speed\n  base-shape   ;; hold the turtle shape\n  lane         ;; 1=inside, 2=outside, 3=Overtakinglane\n]\n\n\n\n;; derive from turtle\nbreed [ androids android ]  ;; simulate car on the road\nbreed [ students student ]  ;; players car's\nbreed [ trucks truck ]      ;; simulate track on the road\n\npatches-own [ orig-color acc-tick-conuter ]\n\nstudents-own [\n  acc             ;; hold the acceleration speed parameter\n  zoom-radius     ;; hold the zoom option for player\n  client-perspective\n  user-id         ;; unique id, input by the client when they log in, to identify each student turtle\n  InitialHeading  ;; save the heading parameter of student position at start\n  PrevHeading     ;; save the previous heading\n  LapCounter      ;; counter the lap's that student made\n  IsFirstLap      ;; flag to know if this is the student first lap\n  MessageRead\n  firstSetup\n  ;;;;;;;; i added these three lines for the HubNet system that he can brodcast the messeges\n  name-label   ;; persistent display name (kept above the status)\n  msg          ;; last status text (\"Free\"/\"Occupied\")\n  msg-ttl      ;; ticks left to show the status (auto-clears)\n  \n;;;;;;;;;;;;;;;;;;;;;;;;;;; added\\changed for HubNet:\n  ui-overall-time\n  ui-laps\n  ui-message\n  ui-speed\n  ui-who\n  \n  laps-float   ;; total laps traveled as a float (e.g., 1.3 = 1 lap + 30%)\n  ; per-client history for plots\n  laps-history     ;; list of this student's recent laps-float values (for client histogram)\n  speed-history   ;; list of this student's recent speeds (for client histogram)\n\n]\n\n;;;;;;;;;;;;;;;;;;;;;;\n;; Setup Procedures ;;\n;;;;;;;;;;;;;;;;;;;;;;\n\n\n;; occurred when startup NetLogo\nto startup\n  set __hnw_teacher_radius                  26\n  set __hnw_teacher_extra-lane-length       22\n  set __hnw_teacher_number-of-cars          65\n  set __hnw_teacher_number-of-trucks        1\n  set __hnw_teacher_InitialSpeed            100\n  set __hnw_teacher_acceleration            1.0\n  set __hnw_teacher_deceleration            1.0\n  set __hnw_teacher_DistanceFromCar         4 \n  set __hnw_teacher_speed-parameter         5\n  set __hnw_teacher_MaxSpeed                100\n  set __hnw_teacher_allowance               1\n  set __hnw_teacher_requiredlaps            1\n  set __hnw_teacher_change-lane-x-of-100    99\n  set __hnw_teacher_androids-change-lane?   false\n  set __hnw_teacher_allow-accident?         true\n  set __hnw_teacher_speed-limit?            false\n  set __hnw_teacher_ShowSlowestPoint?       false\n  set-up-vars\n  \n  ;; --- CSV defaults ---\n  set csv_init \"\"\n  set csv_run \"\"\n  set csv_has_init? false\n  set csv_has_run_header? false\n  \n \n  ;;;;;;;;;;;;;;;;;;;;;; ADDED FOR THE TIME STEMP;;;;;;;;;;;;;;;;;;;;\n;   set csv_started-at \"\"\n;   set csv_finished-at \"\"\n;   set csv_start_ticks 0\n;   set csv_start_runtime 0\n\n  \n  set CSV_SEP \",\" ;; if your Excel uses semicolon locale, set to \";\"\n\nend\n\n\n  ;;occurred when setup butten is pressed\nto setup\n  \n  set DEBUG? true                  ;; turn logs on (flip to false when done)\n  dbg \"S0 enter setup\"\n  \n  set ServerZoom-radius 20\n  Set RunTime 0\n  \n  ask androids [ die ]\n  ask trucks [ die ]\n  \n  \n  ;; ===== Defensive defaults for all UI widgets =====\n  ;; numeric sliders\n  if not is-number? __hnw_teacher_radius               [ set __hnw_teacher_radius 70 ]\n  if not is-number? __hnw_teacher_extra-lane-length    [ set __hnw_teacher_extra-lane-length 22 ]\n  if not is-number? __hnw_teacher_number-of-cars       [ set __hnw_teacher_number-of-cars 50 ]\n  if not is-number? __hnw_teacher_number-of-trucks     [ set __hnw_teacher_number-of-trucks 1 ]\n  if not is-number? __hnw_teacher_InitialSpeed         [ set __hnw_teacher_InitialSpeed 100 ]\n  if not is-number? __hnw_teacher_acceleration         [ set __hnw_teacher_acceleration 1 ]\n  if not is-number? __hnw_teacher_deceleration         [ set __hnw_teacher_deceleration 1 ]\n  if not is-number? __hnw_teacher_DistanceFromCar      [ set __hnw_teacher_DistanceFromCar 4 ]\n  if not is-number? __hnw_teacher_speed-parameter      [ set __hnw_teacher_speed-parameter 5 ]\n  if not is-number? __hnw_teacher_MaxSpeed             [ set __hnw_teacher_MaxSpeed 100 ]\n  if not is-number? __hnw_teacher_allowance            [ set __hnw_teacher_allowance 1 ]\n  if not is-number? __hnw_teacher_requiredlaps         [ set __hnw_teacher_requiredlaps 1 ]\n  if not is-number? __hnw_teacher_change-lane-x-of-100 [ set __hnw_teacher_change-lane-x-of-100 99 ]\n\n  ;; switches (booleans)\n  if not is-boolean? __hnw_teacher_androids-change-lane? [ set __hnw_teacher_androids-change-lane? false ]\n  if not is-boolean? __hnw_teacher_allow-accident?       [ set __hnw_teacher_allow-accident? true ]\n  if not is-boolean? __hnw_teacher_speed-limit?          [ set __hnw_teacher_speed-limit? false ]\n  if not is-boolean? __hnw_teacher_ShowSlowestPoint?     [ set __hnw_teacher_ShowSlowestPoint? false ]\n  ;; ===== end defaults =====\n  \n  ;; keep full ring (incl. third-lane outer bound) inside this world with a small margin - BUT NOW THE TURTLE IS MOVING ACROS THE LANES ! NOT GOOD!\n  let halfMin min (list max-pxcor (- min-pxcor) max-pycor (- min-pycor))\n  let limit2  (halfMin - 2) * (halfMin - 2)   ;; 2-patch visual margin\n;   let maxR    floor sqrt (limit2 - 600)       ;; was 750 → 600 to permit larger r\n  let maxR    floor sqrt (limit2 - 200)\n  if __hnw_teacher_radius > maxR [\n    set __hnw_teacher_radius maxR\n  ]\n\n  ask patches [ set pcolor green ]\n  \n  ask patches [ setup-road __hnw_teacher_radius ]\n  \n  ask patches [ setup-Extra-lanes __hnw_teacher_radius ]\n  ask androids [ die ]\n  \n  setup-cars __hnw_teacher_radius\n  \n  setup-trucks __hnw_teacher_radius\n  ask students [ set LapCounter 0 ]\n  ask students [ set IsFirstLap 1 ]\n  ask students [ send-lap-time ]\n  ask students [ send-lap-counter ]\n  ask turtles [separate-cars]\n  ask patches [set orig-color pcolor]\n  clear-all-plots\n  \n  ;; === AverageSpeed plot: initialize tracking ===\n  set avg_xmin 0\n  set avg_xmax 0\n  set avg_ymin 0\n  set avg_ymax 0\n  set avg_autoplot? true\n  set avg_current_pen \"MaxSpeed\"   ;; matches your Desktop example\n  set avg_legend_open? true\n  set avg_num_pens 2\n\n  set avg_penA_name \"MaxSpeed\"\n  set avg_penA_mode 0\n  set avg_penA_interval 1\n  set avg_penA_color 105\n  set avg_penA_lastx 0\n\n  set avg_penB_name \"MinSpeed\"\n  set avg_penB_mode 0\n  set avg_penB_interval 1\n  set avg_penB_color 55\n  set avg_penB_lastx 0\n\n  set avg_penA_points []\n  set avg_penB_points []\n\n  \n  ;; --- write the one-row init CSV now ---\n  reset-ticks\n  csv-build-init-file\n\n  ask students [ setup-student-vars user-id ]\n  \n  dbg \"S9-exit\"\nend\n\n\n\n\n  ;; initialize global variables\nto set-up-vars\n  set shape-names [  \"turtle\" \"butterfly\" \"airplane\" \"bug\" \"default\" \"arrow\" \"bug\" ]\n  set colors      (list brown green yellow  (violet + 1) (sky + 1))\n  set color-names [\"brown\" \"green\" \"yellow\" \"purple\" \"blue\"]\n  set max-possible-codes (length colors * length shape-names)\n  set used-shape-colors []\nend\n\n   ;;to seprate car's when we do setup\nto separate-cars    ;; turtle procedure\n  if any? other turtles in-cone 2 360\n    [ moveMeFWD\n      separate-cars ]\nend\n\n\n;; ===== create road (clamped to world) =====\nto setup-road [ r ]  ;; patch procedure\n  let d2 (pxcor * pxcor + pycor * pycor)\n  let worldR min (list max-pxcor (- min-pxcor) max-pycor (- min-pycor))\n  let limit2 (worldR - 1) * (worldR - 1)   ;; leave a 1-patch safety margin\n  let rsq r * r\n\n  ;; black band: r^2 ± {100, 400}\n  let in2   max list (rsq - 100) 1 \n  let out2  min list (rsq + 400) limit2\n  if (d2 >= in2) and (d2 <= out2) [ set pcolor black ]\n\n  ;; outer white band: r*(r+5) .. r*(r+5) + 20  (keep your original formula, clamped)\n  let inW2  max list (r * (r + 5)) 1\n  let outW2 min list (r * (r + 5) + 20) limit2\n  if (d2 >= inW2) and (d2 <= outW2) [ set pcolor white ]\n\nend\n\n\n;; ===== create extra / third lane (clamped to world) =====\nto setup-Extra-lanes [ r ]  ;; patch procedure\n  let d2 (pxcor * pxcor + pycor * pycor)\n  let worldR min (list max-pxcor (- min-pxcor) max-pycor (- min-pycor))\n  let limit2 (worldR - 1) * (worldR - 1)\n  let rsq r * r\n\n  ;; black widening: r^2 + [400 .. 750], but only within ± extra-lane-length vertically\n  let in2   max list (rsq + 400) 1\n  let out2  min list (rsq + 600) limit2 ;-TODO - TO DELETE\n\n  if (d2 >= in2) and (d2 <= out2) and (abs pycor <= __hnw_teacher_extra-lane-length) [\n    set pcolor black\n  ]\n\n  ;; white on the widened band: r^2 + [400 .. 420]\n  let inW2  max list (rsq + 400) 1\n  let outW2 min list (rsq + 410) limit2\n  if (d2 >= inW2) and (d2 <= outW2) and (abs pycor <= __hnw_teacher_extra-lane-length) [\n    set pcolor white\n  ]\n\nend\n\n\n\n\n\n  ;;create androids/truck and locate them on both lane\nto setup-cars [r]\n  ;dbg (word \"ENTER setup-cars r=\" r)\n  \n    ; first lane\n  create-androids  (__hnw_teacher_number-of-cars + 1) / 2 - (__hnw_teacher_number-of-cars + 1) * 0.05 [\n    ifelse (1 = 2);(( random 100 ) > 90 ) ; 10% are trucks - eo - cancelled\n    [  ; set Trucks\n      set breed trucks\n      set speed-limit __hnw_teacher_MaxSpeed ;- 0.4 * __hnw_teacher_MaxSpeed\n      set shape \"Truck\"\n\n    ]\n    [ ; set androids\n      set speed-limit __hnw_teacher_MaxSpeed\n      set shape \"car top\"\n    ]\n    set size 2  ; easier to see\n    fd r\n    rt 90\n    set lane 1\n    set speed 1 + random __hnw_teacher_InitialSpeed\n    set speed-min 0\n    set color white\n    ask other androids-here\n  [ die ]\n\n  ]\n    ; second lane\n create-androids  (__hnw_teacher_number-of-cars + 1) / 2 + (__hnw_teacher_number-of-cars + 1) * 0.05 [\n    ifelse (1 = 2);(( random 100 ) > 90 ) ; 10% are trucks\n    [  ; set Trucks\n      set breed trucks\n      set speed-limit __hnw_teacher_MaxSpeed; - 0.3 * __hnw_teacher_MaxSpeed\n      set shape \"Truck\"\n\n    ]\n    [   ; set androids\n      set speed-limit __hnw_teacher_MaxSpeed\n      set shape \"car top\"\n    ]\n    set size 2  ;; easier to see\n    fd r + 5\n    rt 90\n    set speed 1 + random __hnw_teacher_InitialSpeed\n    set lane 2\n    set speed-min 0\n    set color white\n    ask other androids-here\n  [ die ]\n   ask other trucks-here\n  [ die ]\n  ]\n\nend\n\n\nto setup-trucks [r]\n  \n    ; first lane\n  create-androids  (__hnw_teacher_number-of-trucks + 1) / 2 - (__hnw_teacher_number-of-trucks + 1) * 0.05 [\n    ifelse (1 = 1);(( random 100 ) > 90 ) ; 10% are trucks - eo - cancelled\n    [  ; set Trucks\n      set breed trucks\n      set speed-limit __hnw_teacher_MaxSpeed ;- 0.4 * __hnw_teacher_MaxSpeed\n      set shape \"Truck\"\n\n    ]\n    [ ; set androids\n      set speed-limit __hnw_teacher_MaxSpeed\n      set shape \"car top\"\n    ]\n    set size 2  ; easier to see\n    fd r\n    rt 90\n    set lane 1\n    set speed 1 + random __hnw_teacher_InitialSpeed\n    set speed-min 0\n    set color white\n    ask other androids-here\n  [ die ]\n\n  ]\n    ; second lane\n create-androids  (__hnw_teacher_number-of-trucks + 1) / 2 + (__hnw_teacher_number-of-trucks + 1) * 0.05 [\n    ifelse (1 = 1);(( random 100 ) > 90 ) ; 10% are trucks\n    [  ; set Trucks\n      set breed trucks\n      set speed-limit __hnw_teacher_MaxSpeed; - 0.3 * __hnw_teacher_MaxSpeed\n      set shape \"Truck\"\n\n    ]\n    [   ; set androids\n      set speed-limit __hnw_teacher_MaxSpeed\n      set shape \"car top\"\n    ]\n    set size 2  ;; easier to see\n    fd r + 5\n    rt 90\n    set speed 1 + random __hnw_teacher_InitialSpeed\n    set lane 2\n    set speed-min 0\n    set color white\n    ask other androids-here\n  [ die ]\n   ask other trucks-here\n  [ die ]\n  ]\n  ;dbg \"EXIT setup-trucks\"\n\nend\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;\n;; Runtime Procedures ;;\n;;;;;;;;;;;;;;;;;;;;;;;;\n\nto go\n\n  every 0.1\n    [\n      if __hnw_teacher_androids-change-lane? [ ask androids [ zigzag ]] ;;if button is up allow change lane \n      circle __hnw_teacher_radius         ;;move the car on the road\n      plot-cars             ;;display the plot on the screen\n      \n      ;; update each student's cumulative laps - helper for the distance histogram of the host plot\n      ask students [\n        \n        ;show (word \"[DBG] GO: inside ask students, who=\" who)\n        set laps-float calc-laps-float\n        ;; keep a short rolling history so histograms show something\n        let HIST_LEN 120  ;; ~12 seconds if every 0.1; tweak as you like\n\n        ;; append current samples\n        set speed-history lput speed       speed-history\n        set laps-history  lput laps-float  laps-history\n        \n        if length speed-history > HIST_LEN [ set speed-history butfirst speed-history ]\n        if length laps-history  > HIST_LEN [ set laps-history  butfirst laps-history  ]\n        \n      ]\n\n      if __hnw_teacher_ShowSlowestPoint?\n      [ Draw-Slowest ]\n\n      ;; --- status TTL maintenance (message below name) ---\n      ;; decay first, so labels that just expired can be redrawn below\n      decay-msg\n\n      ask students [\n       if (not is-string? name-label) or (name-label = \"\") [\n         set name-label (word \"ID \" user-id)\n       ]\n\n       ;; only draw the baseline label when there is no active message\n       if msg-ttl = 0 [\n         ;; baseline: show name + current speed on one line\n         set label (word name-label \" -> \" floor speed)\n         set label-color red\n       ]\n\n      ]\n     tick\n   ]\n     ; calculate time in sec\n    every 1\n    [\n      Set RunTime RunTime + 1\n      ask students [ refresh-student-ui ]\n      \n      \n      ;;;;;;;;;;; CSV (per-second) ;;;;;;;;;;;\n      csv-ensure-run-header\n      if any? students [\n        ;; gather all rows first, then append (faster)\n        let rows [ csv-row-for-student ] of students\n        set csv_run (word csv_run (reduce word rows))\n      ]\n      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n      \n      ask patches [ifelse acc-tick-conuter > 0 [set acc-tick-conuter acc-tick-conuter - 1][set pcolor orig-color] ]\n    ]\nend\n\n\n\n  ;;change lane of androids\nto zigzag\n  if (( random 100 ) < __hnw_teacher_change-lane-x-of-100 ) and (speed < __hnw_teacher_MaxSpeed) and (count other turtles in-cone __hnw_teacher_DistanceFromCar 30 > 0)\n  [\n   if (lane = 1 )\n   [\n     execute-move 270\n     stop\n   ]\n\n   if (lane = 2)\n   [\n     execute-move 90\n     stop\n   ]\n    ]\nend\n\n\nto circle [r]\n     ask turtles [ move-along-circle r ]\nend\n\n   ;;draw the slowest turtle on road in red\nto Draw-Slowest\n    ; set Slowing-Point one-of turtles with [speed = min [speed] of turtles]\n  let min-speed min [speed] of turtles\n  set min-speed min-speed + __hnw_teacher_allowance\n  ask turtles [\n   ifelse speed < min-speed\n   [set color red  ]\n   [set color blue  ]\n  ]\nend\n\n   ;;move androids forwards on thier lane if they are on the same patch with other\nto MoveMeFWD\n   if lane = 1\n  [\n    fd (pi * __hnw_teacher_radius / 180) * (speed / 50)\n    rt speed / 50\n  ]\n   if lane = 2\n  [\n    fd (pi * ( __hnw_teacher_radius + 5) / 180) * (speed / 50)\n    rt speed / 50\n  ]\n     if lane = 3\n  [\n    fd (pi * ( __hnw_teacher_radius + 10) / 180) * (speed / 50)\n    rt speed / 50\n  ]\n   if any? other turtles-here\n   [ MoveMeFWD ]\nend\n\n\n ;;the main method who move's the car forwords\nto move-along-circle [r] ; turtles function\n  if (breed =  students)\n     [ set PrevHeading heading ]  ; For Lap Counter\n  let ps patches in-cone __hnw_teacher_DistanceFromCar 60\n  let ps1 patches in-cone 2 360\n   ; if want to show the cone that car lock ahead take out the comment below\n   ;  ask ps [ set pcolor 5]\n  let car-ahead one-of other turtles-on ps\n  let car-ahead1 one-of other turtles-on ps1\n   ; if car is on the end of Extra lane than stop car\n  if (lane = 3) and ((ycor > __hnw_teacher_extra-lane-length  ) or (ycor < 0 - __hnw_teacher_extra-lane-length ))\n  [\n    set speed 0\n    stop\n  ]\n\n\n \n  if-else __hnw_teacher_allow-accident? and (breed =  students)\n           ; if button allow accident is turn-on and you are student\n  [ifelse car-ahead != nobody\n    [\n      if speed > [speed] of car-ahead\n      [ accident-fireworks\n        set speed [speed] of car-ahead ]\n        slow-down-car\n\n    ]\n    [\n       ifelse car-ahead1 != nobody\n       [\n         if speed > [speed] of car-ahead1\n         [ set speed [speed] of car-ahead1 ]\n         slow-down-car\n       ]\n        ; otherwise, speed up\n       [ speed-up-car ]\n    ]\n\n ]\n        ; if button allow accident is turn-off\n  [\n    ifelse car-ahead != nobody and( [speed] of car-ahead   < speed  + 10 )\n    [\n      if speed > [speed] of car-ahead\n      [ set speed [speed] of car-ahead ]\n\n      slow-down-car\n    ]\n     ; otherwise, speed up\n    [ speed-up-car ]\n  ]\n\n  set car-ahead nobody\n     ; don't slow down below speed minimum or speed up beyond speed limit\n  if speed < speed-min  [ set speed speed-min ]\n  if speed > speed-limit and __hnw_teacher_speed-limit?  [ set speed speed-limit ]\n     ; perform car move on road\n  if lane = 1\n  [\n    fd (pi * __hnw_teacher_radius / 180) * (speed / 50)\n    rt speed / 50\n  ]\n  if lane = 2\n  [\n    fd (pi * ( __hnw_teacher_radius + 5) / 180) * (speed / 50)\n    rt speed / 50\n  ]\n  if lane = 3\n  [\n    fd (pi * ( __hnw_teacher_radius + 10) / 180) * (speed / 50)\n    rt speed / 50\n  ]\n  calc_lap_counter\nend\n\n   ;; calculate Lap Counter for student only\nto calc_lap_counter\n\n  if (breed =  students)\n   [\n      if ((PrevHeading <= InitialHeading) and (heading > InitialHeading)) or ((PrevHeading < InitialHeading) and (heading >= InitialHeading))\n      [\n        ifelse (IsFirstLap = 0)\n        [\n          set LapCounter LapCounter + 1\n          send-Lap-counter \n          if (__hnw_teacher_requiredlaps = LapCounter) and (__hnw_teacher_requiredlaps > 0)\n          [\n             send-lap-time\n          ]\n        ]\n        [\n          set LapCounter 0\n          set IsFirstLap 0\n          send-Lap-counter\n        ]\n      ]\n   ]\n\nend\n\n\n\n;;helper the procedure that will polt the distance histogram of the host\n;; Report the total laps (LapCounter + fractional progress) for one student\nto-report calc-laps-float  ;; turtle reporter, student context\n  let diff heading - InitialHeading\n  if diff < 0 [ set diff diff + 360 ]\n  report LapCounter + (diff / 360)\nend\n\n\nto slow-down-car  ;; turtle procedure\n   set speed speed - __hnw_teacher_deceleration\n   ;accident-fireworks\nend\n\n\nto accident-fireworks\n  ask patches in-radius 2\n      [ set pcolor red + random-float 3\n        set acc-tick-conuter 1] ;;;actually seconds not ticks:)\n\nend\n\n\nto speed-up-car  ;; turtle procedure\n  ifelse breed = students\n  [ set speed speed + acc\n    set acc 0\n  ]\n  [ set speed speed + __hnw_teacher_acceleration ]\nend\n\n   ;; turtle procedure chnge car lane, get the direction to go-to\nto change-lane [ side ]\n  if (lane = 1 ) and (side = \"left\")\n  [\n    set lane  2\n    setxy 0 0\n    fd __hnw_teacher_radius + 5\n    stop\n  ]\n  if (lane = 2) and (side = \"right\")\n  [\n    set lane  1\n    setxy 0 0\n    back __hnw_teacher_radius\n    stop\n  ]\n   if (lane = 2) and (side = \"left\")\n  [\n    set lane  3\n    setxy 0 0\n    fd __hnw_teacher_radius + 10\n    stop\n  ]\n   if (lane = 3) and (side = \"right\")\n  [\n    set lane  2\n    setxy 0 0\n    back __hnw_teacher_radius + 5\n    stop\n  ]\nend\n\n\nto plot-cars\n  if (count turtles != 0) [\n    set-current-plot \"AverageSpeed\"\n\n    ;; MinSpeed\n    set-current-plot-pen \"MinSpeed\"\n    let yMin min [speed] of turtles\n    plot yMin\n    record-avg-point avg_penB_name ticks yMin\n\n    ;; MaxSpeed\n    set-current-plot-pen \"MaxSpeed\"\n    let yMax max [speed] of turtles\n    plot yMax\n    record-avg-point avg_penA_name ticks yMax\n\n    ;; keep rough ranges for export\n    if ticks > avg_xmax [ set avg_xmax ticks ]\n    if ticks < avg_xmin [ set avg_xmin ticks ]  ;; stays 0 unless you reset ticks mid-run\n    if (avg_ymin = 0) or (yMin < avg_ymin) [ set avg_ymin yMin ]\n    if (yMax > avg_ymax) [ set avg_ymax yMax ]\n  ]\nend\n\n\n\nto record-avg-point [penName x y]\n  let penDown? true\n  if penName = avg_penA_name [\n    set avg_penA_lastx x\n    set avg_penA_points lput (list x y avg_penA_color penDown?) avg_penA_points\n  ]\n  if penName = avg_penB_name [\n    set avg_penB_lastx x\n    set avg_penB_points lput (list x y avg_penB_color penDown?) avg_penB_points\n  ]\nend\n\n\n\n\n   ;; turtle function ,get direction to change car lane and\n   ;; call change-lane function if possible , else\n   ;; return to (student only) occupied\nto execute-move [direction]\n   ; check aveliable space in that direction\n  ifelse direction = 90\n  [\n    ;; right\n    rt direction\n    let ps patches in-cone 8 60\n    let car-ahead one-of other turtles-on ps\n    ifelse (car-ahead = nobody) and ((lane = 2) or (lane = 3))\n    [\n      if (breed = students) [ student-msg \"Free\" ]\n      change-lane \"right\"\n    ]\n\n    [\n      if (breed = students) [ student-msg \"Occupied\"]\n    ]\n    lt direction\n  ]\n\n  ;;left\n  [  rt direction\n     let ps patches in-cone 8 60\n     let car-ahead one-of other turtles-on ps\n     ifelse (car-ahead = nobody) and ((lane = 1) or (lane = 2))\n     [\n      if (breed = students) [ student-msg \"Free\" ]\n      ifelse (( lane = 2 ) and (ycor < __hnw_teacher_extra-lane-length - 3) and (ycor > 3 - __hnw_teacher_extra-lane-length)) or (lane != 2)\n      [\n      change-lane  \"left\"\n      ]\n      [ if (breed = students) [ student-msg \"Occupied\" ] ]\n    ]\n    [ if (breed = students) [ student-msg \"Occupied\" ] ]\n    lt direction\n  ]\nend\n\n\n;;;;;;;;;;;;;;;;;;;;;;;\n;; HubNet Procedures ;;\n;;;;;;;;;;;;;;;;;;;;;;;\n\n\n;; Called automatically when a student joins (Student role)\n;; OBSERVER context — must REPORT the student's turtle who number.\nto-report on-connect [alias]\n  let s one-of students with [ user-id = alias ]\n  \n  show (word \"DEBUG on-connect: alias=\" alias\n           \" existing? \" (s != nobody))\n\n  ifelse s = nobody [\n    ;; first time: create a student for this alias\n    let new-who create-new-student alias\n    set s one-of students with [ who = new-who ]\n  ] [\n    ;; reconnect: optionally refresh\n    ask s [ setup-student-vars alias ]\n  ]\n\n  show (word \"DEBUG on-connect: alias=\" alias\n           \" -> who=\" [who] of s)\n\n  report [who] of s\nend\n\n\n\n;; HubNet Web version: remove a student by their participant id\nto remove-student [uid]\n  ask students with [user-id = uid] [\n    set used-shape-colors remove my-code used-shape-colors\n    die\n  ]\nend\n\n\nto-report my-code\n  report (position base-shape shape-names) + (length shape-names) * (position color colors)\nend\n\n\n\n;;;; ask chatgot abiut this-\nto-report create-new-student [uid]\n  let new-student-who nobody\n  create-students 1 [\n    setup-student-vars uid\n    ;student-setup-speed-histogram\n    ;student-setup-distance-histogram\n    set client-perspective (list \"follow\" self zoom-radius) \n    set new-student-who who\n    send-info-to-clients\n  ]\n  report new-student-who\nend\n\n\n\nto setup-student-vars [uid]\n  setxy 0 0\n  if firstSetup < 1 [\n    set user-id uid\n  ]\n  set firstSetup 1\n  set name-label (word uid)  ;; use the alias the student typed\n  show (word \"DEBUG setup-student-vars: uid=\" uid\n           \" who=\" who\n           \" name-label=\" name-label)\n\n  set-unique-shape-and-color\n  set zoom-radius 20\n  set size 2    ;; easier to see\n  fd __hnw_teacher_radius\n  rt 90\n  set lane 1\n  set speed 1 + random __hnw_teacher_InitialSpeed\n  set speed-min 0\n  set speed-limit __hnw_teacher_MaxSpeed\n  set acc 0\n  set InitialHeading heading\n  \n    set ui-speed        floor speed\n  set ui-laps         LapCounter\n  set ui-overall-time RunTime\n  set ui-message      \"Free\"\n  \n  set speed-history []\n  set laps-history  []\n\n  ask other androids-here [\n    MoveMeFWD ;; avoid student car on android\n  ]\nend\n\n\n\n   ;; student function\n   ;;give every student unique shape and color\nto set-unique-shape-and-color\n  let code random max-possible-codes\n  while [member? code used-shape-colors and count students < max-possible-codes]\n  [\n    set code random max-possible-codes\n  ]\n  set used-shape-colors (lput code used-shape-colors)\n  set base-shape item (code mod length shape-names) shape-names\n  set shape base-shape\n  set color item (code / length shape-names) colors\n\nend\n\n\n   ;; student function\n   ;; determines  what the command is and performed it\nto execute-command [command]\n  if command = \"speed up\"\n  [ show (word \"speed-up from uid=\" user-id \" who=\" who)\n    set acc __hnw_teacher_speed-parameter\n    send-info-to-clients\n    stop\n  ]\n  if command = \"speed down\"\n  [ \n    show (word \"speed-down from uid=\" user-id \" who=\" who)\n    set acc 0 - __hnw_teacher_speed-parameter\n    send-info-to-clients\n    stop\n  ]\n  if command = \"right\"\n    [\n      show (word \"right from uid=\" user-id \" who=\" who)\n      execute-move 90 stop\n    ]\n  if command = \"left\"\n    [\n      show (word \"left from uid=\" user-id \" who=\" who)\n      execute-move 270 stop\n    ]\nend\n\n\n\nto ZoomIn\n  set ServerZoom-radius max list 1 (ServerZoom-radius - 1)\n  ask students [\n    set zoom-radius ServerZoom-radius\n    set client-perspective (list \"follow\" self zoom-radius)\n  ]\nend\n\nto ZoomOut\n  set ServerZoom-radius min list 30 (ServerZoom-radius + 1)\n  ask students [\n    set zoom-radius ServerZoom-radius\n    set client-perspective (list \"follow\" self zoom-radius) \n  ]\nend\n\n\n\n   ;;send lap counter to client →  show a short per-turtle status\nto send-lap-counter\n  if breed = students [\n    student-msg (word \"Laps \" LapCounter)   ;; shows under the name for ~8 cycles\n  ]\nend\n\n   ;;send lap time to client →  short per-turtle status\nto send-lap-time\n  if breed = students [\n    student-msg (word \"OverallTIme \" RunTime)     ;; shows under the name for ~8 cycles\n  ]\nend\n\n\n   ;; sends the appropriate monitor information back to the client\nto send-info-to-clients\n  set speed floor speed\n\n  if breed = students [\n     if (not is-string? name-label) or (name-label = \"\") [\n       set name-label (word \"ID \" user-id)\n     ]\n    ;; only update the baseline when no active status is being shown\n    if msg-ttl = 0 [\n      ;; top line: name + speed + lap\n      set label (word name-label \" -> \" floor speed)\n      set label-color red\n    ]\n\n  ]\nend\n\n\n\n   ;; report the string version of the turtle's color\nto-report color-string [color-value]\n  report item (position color-value colors) color-names\nend\n\n\n\n;; Show a short status under the student's name for 8 ticks\nto student-msg [txt]\n  if breed = students [\n     if (not is-string? name-label) or (name-label = \"\") [\n       set name-label (word \"ID \" user-id)\n     ]\n\n    set msg txt\n    set ui-message txt   ;; <— add this\n    set msg-ttl 8\n    set label-color red   ;; keep overlay but always red\n  ]\nend\n\n;; Called once per tick to fade the status and restore the plain name\nto decay-msg\n  ask students with [msg-ttl > 0] [\n    set msg-ttl msg-ttl - 1\n    if msg-ttl = 0 [\n      set label name-label\n    ]\n  ]\nend\n\n\n\n;; === Student role: button handlers (HubNet Web) ===\nto cmd-speed-up\n  ;; runs in *this* student's turtle context\n  execute-command \"speed up\"\nend\n\nto cmd-speed-down\n  execute-command \"speed down\"\nend\n\nto cmd-left\n  execute-command \"left\"\nend\n\nto cmd-right\n  execute-command \"right\"\nend\n\n\n\nto refresh-student-ui  ;; turtle proc\n  if breed = students [\n    set ui-speed        floor speed\n    set ui-laps         LapCounter\n    set ui-overall-time RunTime\n    set ui-message      msg\n    set ui-who          who\n\n  ]\n  \n  if (is-turtle? watched) [\n    ask watched [\n      set-current-plot \"Student Distance\"\n      student-update-my-distance-hist\n      set-current-plot \"Student Speed\"\n      student-update-my-speed-hist\n    ]\n  ]\nend\n\n\nto dbg [text]                  ;; was: to dbg [msg]\n  if DEBUG? [ show (word \"[DBG] \" text) ]\nend\n\nto dbg-val [tag v]             ;; we already fixed this from 'label'\n  if DEBUG? [ show (word \"[DBG] \" tag \" = \" v) ]\nend\n\n\nto noop end\n\nto teacher-set-number-of-cars [n]        set __hnw_teacher_number-of-cars n end\nto teacher-set-number-of-trucks [n]      set __hnw_teacher_number-of-trucks n end\nto teacher-set-radius [n]                set __hnw_teacher_radius n end\nto teacher-set-initial-speed [n]         set __hnw_teacher_InitialSpeed n end\nto teacher-set-acceleration [x]          set __hnw_teacher_acceleration x end\nto teacher-set-deceleration [x]          set __hnw_teacher_deceleration x end\nto teacher-set-distance-from-car [n]     set __hnw_teacher_DistanceFromCar n end\nto teacher-toggle-androids-change-lane [v] set __hnw_teacher_androids-change-lane? v end\nto teacher-toggle-allow-accident [v]     set __hnw_teacher_allow-accident? v end\nto teacher-toggle-speed-limit [v]        set __hnw_teacher_speed-limit? v end\nto teacher-set-speed-parameter [n]       set __hnw_teacher_speed-parameter n end\nto teacher-set-extra-lane-length [n]     set __hnw_teacher_extra-lane-length n end\nto teacher-set-max-speed [n]             set __hnw_teacher_MaxSpeed n end\nto teacher-set-allowance [n]             set __hnw_teacher_allowance n end\nto teacher-toggle-show-slowest-point [v] set __hnw_teacher_ShowSlowestPoint? v end\nto teacher-set-required-laps [n]         set __hnw_teacher_RequiredLaps n end\nto teacher-set-change-lane-prob [n]      set __hnw_teacher_change-lane-x-of-100 n end\n\n\n\nto-report average-speed\n  report ifelse-value any? androids [ mean [speed] of androids ] [ 0 ]\nend\n\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;; HOST PROCS OF THE PLOTS ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n;; ——— HOST Speed Histogram: setup and update ———\n\nto teacher-setup-speed-histogram\n  ;set-current-plot \"Speed Histogram\"\n  clear-plot\n  let xmax ifelse-value is-number? __hnw_teacher_MaxSpeed [ __hnw_teacher_MaxSpeed ] [ 100 ]\n  set-plot-x-range 0 (max (list 1 xmax))\n  let bars max list 10 (floor (xmax / 5))\n  set-histogram-num-bars bars\nend\n\nto teacher-update-speed-histogram\n  ;set-current-plot \"Speed Histogram\"\n  ;; one dataset: all student speeds\n  let speeds [ speed ] of students\n  set-current-plot-pen \"dist\"\n  histogram speeds\n  ;; vertical line at mean speed (students only)\n  let avg ifelse-value any? students [ mean speeds ] [ 0 ]\n  set-current-plot-pen \"avg-speed\"\n  plot-pen-reset\n  plotxy avg 0\n  plotxy avg (count students)\nend\n\n\n\n;; ——— HOST Distance Histogram: setup and update ———\n\nto teacher-setup-distance-histogram\n  ;set-current-plot \"Distance Histogram\"\n  clear-plot\n  ;; x-range up to max laps so far, fallback to 1 if no students yet\n  let xmax ifelse-value any? students [ ceiling max [laps-float] of students ] [ 1 ]\n  set-plot-x-range 0 (max (list 1 xmax))\n  set-histogram-num-bars 10   ;; adjust bins if you want finer granularity\nend\n\nto teacher-update-distance-histogram\n  ;set-current-plot \"Distance Histogram\"\n  let laps [ laps-float ] of students\n\n  set-current-plot-pen \"dist\"\n  histogram laps\n\n  ;; vertical line at mean laps\n  let avg ifelse-value any? students [ mean laps ] [ 0 ]\n  set-current-plot-pen \"avg-laps\"\n  plot-pen-reset\n  plotxy avg 0\n  plotxy avg (count students)\nend\n\n\n\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;; CLIENT PROCS OF THE PLOTS ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  SPEED  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n\n; ; ======== CLIENT PLOTS (run in the student's turtle context) ========\n\n; to student-setup-my-speed-hist\n;   ;set-current-plot \"My Speed Histogram\"\n;   show (word \"[DBG] student setup speed plot who=\" who)\n;   clear-plot\n;   let xmax (ifelse-value is-number? __hnw_teacher_MaxSpeed [__hnw_teacher_MaxSpeed] [100])\n;   set-plot-x-range 0 xmax\n;   set-histogram-num-bars 15\n; end\n\n; to student-update-my-speed-hist\n;   ;set-current-plot \"My Speed Histogram\"\n;   show (word \"[DBG] student update speed plot who=\" who)\n;   ; keep X large enough for the current data\n;   let xmax1 (ifelse-value (length speed-history > 0) [max speed-history] [1])\n;   let xmax2 (ifelse-value is-number? __hnw_teacher_MaxSpeed [__hnw_teacher_MaxSpeed] [100])\n;   set-plot-x-range 0 max list xmax1 xmax2\n;   set-current-plot-pen \"dist\"\n;   histogram speed-history\n; end\n\n\n; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  DISTANCE   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n; to student-setup-my-distance-hist\n;   show (word \"[DBG] student setup distance plot who=\" who)\n;   ;set-current-plot \"My Distance Histogram\"\n;   clear-plot\n;   ; laps can exceed 1 — allow autoscale from 0 to at least 1\n;   set-plot-x-range 0  max list 1 (ifelse-value (length laps-history > 0) [max laps-history] [1])\n;   set-histogram-num-bars 15\n; end\n\n; to student-update-my-distance-hist\n;   show (word \"[DBG] student update distance plot who=\" who)\n;   ;set-current-plot \"My Distance Histogram\"\n;   let xmax (ifelse-value (length laps-history > 0) [max laps-history] [1])\n;   set-plot-x-range 0 max list 1 xmax\n;   set-current-plot-pen \"dist\"\n;   histogram laps-history\n; end\n\n\n\n;;;;;;;;;;;;;;;;;;;; OF JASON ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n; + watched in globals + the block in refresh-student-ui :\"if (is-turtle? watched)[...]\"\nto student-setup-my-speed-hist\n  clear-plot\nend\n\nto student-update-my-speed-hist\n  plot speed\nend\n\n\nto student-setup-my-distance-hist\n  clear-plot\nend\n\nto student-update-my-distance-hist\n  plot laps-float\nend\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n\n\n;; ========== CSV: headers & row builders ==========\n\n;; ---------- EXACT Desktop-style section headers (no renames) ----------\nto csv-write-init-header\n  ;; NOTE: we only emit headers here (no data rows yet).\n  ;; Tabs (\\t) are used between column names to match your file.\n\n  let H \"\"\n  set H (word\n    \"GLOBALS:\\n\"\n    \"min-pxcor\\tmax-pxcor\\tmin-pycor\\tmax-pycor\\tperspective\\tsubject\\tnextIndex\\tdirected-links\\tticks\\tacceleration\\tallow-accident?\\tallowance\\tandroids-change-lane?\\tchange-lane-x-of-100\\tcolor-names\\tcolors\\tdeceleration\\tdistancefromcar\\textra-lane-length\\tinitialspeed\\tlog-filename\\tmax-possible-codes\\tmaxspeed\\tnumber-of-cars\\tnumber-of-trucks\\tradius\\trequiredlaps\\truntime\\tsample-car\\tserverzoom-radius\\tshape-names\\tshowslowestpoint?\\tslowing-point\\tspeed-limit?\\tspeed-parameter\\tused-shape-colors\\n\"\n    \"\\n\"\n    \"TURTLES:\\n\"\n    \"who\\tcolor\\theading\\txcor\\tycor\\tshape\\tlabel\\tlabel-color\\tbreed\\thidden?\\tsize\\tpen-size\\tpen-mode\\tspeed\\tspeed-limit\\tspeed-min\\tbase-shape\\tlane\\tacc\\tzoom-radius\\tuser-id\\tinitialheading\\tprevheading\\tlapcounter\\tisfirstlap\\tmessageread\\tfirstsetup\\n\"\n    \"\\n\"\n    \"PATCHES:\\n\"\n    \"pxcor\\tpycor\\tpcolor\\tplabel\\tplabel-color\\torig-color\\tacc-tick-conuter\\n\"\n    \"\\n\"\n    \"LINKS:\\n\"\n    \"end1\\tend2\\tcolor\\tlabel\\tlabel-color\\thidden?\\tbreed\\tthickness\\tshape\\ttie-mode\\n\"\n    \"\\n\"\n    \"PLOT \\\"AverageSpeed\\\" — plot properties:\\n\"\n    \"x min\\tx max\\ty min\\ty max\\tautoplot?\\tcurrent pen\\tlegend open?\\tnumber of pens\\n\"\n    \"\\n\"\n    \"PLOT \\\"AverageSpeed\\\" — pen properties (per pen):\\n\"\n    \"pen name\\tpen down?\\tmode\\tinterval\\tcolor\\tx\\n\"\n    \"\\n\"\n    \"PLOT \\\"AverageSpeed\\\" — pen dataset labels line (two pens present):\\n\"\n    \"\\\"MaxSpeed\\\"\\t\\t\\t\\t\\t\\t\\\"MinSpeed\\\"\\n\"\n    \"\\n\"\n    \"PLOT \\\"AverageSpeed\\\" — per-row dataset columns (repeated once per pen, so 8 columns total):\\n\"\n    \"x\\ty\\tcolor\\tpen down?\\tx\\ty\\tcolor\\tpen down?\\n\"\n  )\n\n  set csv_init H\nend\n\n\n\n\n\nto csv-write-run-header\n  show (word \"[DBG] ENTER TO csv-write-run-header proc\")\n  ;; matches \"logger.csv\" header (per-student, per-second)\n  set csv_run (word\n    \"RunTime,who,user-id,color,heading,xcor,ycor,shape,speed,speed-limit,speed-min,base-shape,lane,acc,zoom-radius,initialheading,prevheading,lapcounter,isfirstlap,messageread,firstsetup\\n\")\nend\n\n\n\nto csv-ensure-run-header\n  if not csv_has_run_header? [\n    ;show (word \"[DBG] ENTER TO csv-ensure-run-header proc\")\n    csv-write-run-header\n    set csv_has_run_header? true\n  ]\nend\n\n\nto-report csv-row-for-student  ;; turtle reporter\n  ;; helper: print breed like {breed students} to match desktop\n  let breed-str (word \"{breed \" breed \"}\")\n  ;; helper: quote label text (desktop quotes strings)\n  let qlabel (word \"\\\"\" label \"\\\"\")\n\n  report (word\n    RunTime \",\" who \",\" user-id \",\" color \",\" heading \",\"\n    xcor \",\" ycor \",\" shape \",\" speed \",\" speed-limit \",\" speed-min \",\"\n    base-shape \",\" lane \",\" acc \",\" zoom-radius \",\"\n    InitialHeading \",\" PrevHeading \",\" LapCounter \",\" IsFirstLap \",\" MessageRead \",\" firstSetup \"\\n\")\nend\n\n\n\nto-report csv-init-text\n  report csv_init\nend\n\nto-report csv-run-text\n  report csv_run\nend\n\nto clear-csv-run\n  set csv_run \"\"\nend\n\n\n; 2) Optional: a simple helper to make filenames consistent with your wrapper\nto-report ts-stamp\n  ;; We’ll use ticks for uniqueness since cross-platform-safe timestamp formatting is messy in NLW.\n  report (word ticks)\nend\n\n\n\n; 3) Save the INIT snapshot (header + 1 row)\nto save-init-csv\n  ;; build non-plot sections (fresh) and then append current plot data\n  csv-build-init-file\n  csv-emit-plot-averagespeed   ;; <-- add plot section now (after GO has produced data)\n\n  let txt (csv-init-text)\n  if (not is-string? txt) [ set txt (word txt) ]\n  if (length txt = 0) [ print \"INIT CSV is empty; nothing to save.\" stop ]\n  let fname (word \"logger_world_init_data_\" ts-stamp \".csv\")\n  send-to:file fname txt\n  print (word \"Saved: \" fname)\nend\n\n\n\n; 4) Save the RUN log (header + many rows), then clear the model buffer\nto save-run-csv\n  let txt (csv-run-text)\n  if (not is-string? txt) [ set txt (word txt) ]\n  if (length txt = 0) [\n    print \"RUN CSV is empty; nothing to save.\"\n    stop\n  ]\n  let fname (word \"logger_run_\" ts-stamp \".csv\")\n  send-to:file fname txt\n  print (word \"Saved: \" fname)\n  clear-csv-run\n  print \"Run buffer cleared.\"\nend\n\n\n\n\n;;;;;;;;;;;;;;;;;;;;; ADDED FOR \"full data-row builders\" ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n;;1) Fix the helpers (drop these in)\n;; ===== CSV helpers (fixed) =====\nto csv-clear\n  set csv_init \"\"\nend\n\nto csv-append [text]\n  set csv_init (word csv_init text)\nend\n\nto csv-append-line [text]\n  set csv_init (word csv_init text \"\\n\")\nend\n\n;; ===== CSV helpers: quote every cell, join by CSV_SEP =====\nto-report csv-quote-cell [x]\n  ;; turn value into a string and wrap with quotes\n  let s (word x)\n  report (word \"\\\"\" s \"\\\"\")\nend\n\nto-report csv-tab-join [vals]\n  let out \"\"\n  foreach vals [\n    v ->\n    let cell csv-quote-cell v\n    ifelse out = \"\" [\n      set out cell\n    ] [\n      set out (word out CSV_SEP cell)\n    ]\n  ]\n  report out\nend\n\n\n\n\n;;2) GLOBALS section (safe values; exact headers)\nto csv-emit-globals\n  csv-append-line \"GLOBALS:\"\n  csv-append-line (csv-tab-join\n    [ \"min-pxcor\" \"max-pxcor\" \"min-pycor\" \"max-pycor\" \"perspective\" \"subject\" \"nextIndex\"\n      \"directed-links\" \"ticks\" \"acceleration\" \"allow-accident?\" \"allowance\"\n      \"androids-change-lane?\" \"change-lane-x-of-100\" \"color-names\" \"colors\" \"deceleration\"\n      \"distancefromcar\" \"extra-lane-length\" \"initialspeed\" \"log-filename\" \"max-possible-codes\"\n      \"maxspeed\" \"number-of-cars\" \"number-of-trucks\" \"radius\" \"requiredlaps\" \"runtime\"\n      \"sample-car\" \"serverzoom-radius\" \"shape-names\" \"showslowestpoint?\" \"slowing-point\"\n      \"speed-limit?\" \"speed-parameter\" \"used-shape-colors\" ])\n\n  ;; keep risky fields \"\" to avoid NLW surprises\n  let g-row (list\n    min-pxcor max-pxcor min-pycor max-pycor\n    \"\" \"\" \"\"                          ;; perspective, subject, nextIndex (desktop-only)\n    \"\"                                ;; directed-links\n    ticks\n    __hnw_teacher_acceleration\n    __hnw_teacher_allow-accident?\n    __hnw_teacher_allowance\n    __hnw_teacher_androids-change-lane?\n    __hnw_teacher_change-lane-x-of-100\n    (word color-names)\n    (word colors)\n    __hnw_teacher_deceleration\n    __hnw_teacher_DistanceFromCar\n    __hnw_teacher_extra-lane-length\n    __hnw_teacher_InitialSpeed\n    \"logger\"\n    max-possible-codes\n    __hnw_teacher_MaxSpeed\n    __hnw_teacher_number-of-cars\n    __hnw_teacher_number-of-trucks\n    __hnw_teacher_radius\n    __hnw_teacher_requiredlaps\n    RunTime\n    \"\"                                ;; sample-car (structure in your model; keep text-safe)\n    ServerZoom-radius\n    (word shape-names)\n    __hnw_teacher_ShowSlowestPoint?\n    \"\"                                ;; Slowing-Point (structure), leave blank\n    __hnw_teacher_speed-limit?\n    __hnw_teacher_speed-parameter\n    (word used-shape-colors)\n  )\n  csv-append-line (csv-tab-join g-row)\n  csv-append-line \"\"\nend\n\n\n\n\n;;3) TURTLES section (guard student-only fields)\nto csv-emit-turtles\n  csv-append-line \"TURTLES:\"\n  csv-append-line (csv-tab-join\n    [ \"who\" \"color\" \"heading\" \"xcor\" \"ycor\" \"shape\" \"label\" \"label-color\"\n      \"breed\" \"hidden?\" \"size\" \"pen-size\" \"pen-mode\"\n      \"speed\" \"speed-limit\" \"speed-min\" \"base-shape\" \"lane\" \"acc\" \"zoom-radius\"\n      \"user-id\" \"initialheading\" \"prevheading\" \"lapcounter\" \"isfirstlap\" \"messageread\" \"firstsetup\" ])\n\n  ask turtles [\n    let row (list\n      who color heading xcor ycor shape label label-color\n      breed hidden? size pen-size pen-mode\n      speed speed-limit speed-min base-shape lane\n      (ifelse-value (breed = students) [ acc ]            [ 0 ])\n      (ifelse-value (breed = students) [ zoom-radius ]    [ \"\" ])\n      (ifelse-value (breed = students) [ user-id ]        [ \"\" ])\n      (ifelse-value (breed = students) [ InitialHeading ] [ \"\" ])\n      (ifelse-value (breed = students) [ PrevHeading ]    [ \"\" ])\n      (ifelse-value (breed = students) [ LapCounter ]     [ 0 ])\n      (ifelse-value (breed = students) [ IsFirstLap ]     [ 0 ])\n      (ifelse-value (breed = students) [ MessageRead ]    [ \"\" ])\n      (ifelse-value (breed = students) [ firstSetup ]     [ 0 ])\n    )\n    csv-append-line (csv-tab-join row)\n  ]\n  csv-append-line \"\"\nend\n\n\n\n;;4) PATCHES section (guards optional vars)\n\nto csv-emit-patches\n  csv-append-line \"PATCHES:\"\n  csv-append-line (csv-tab-join\n    [ \"pxcor\" \"pycor\" \"pcolor\" \"plabel\" \"plabel-color\" \"orig-color\" \"acc-tick-conuter\" ])\n\n  ask patches [\n    let row (list\n      pxcor pycor pcolor plabel plabel-color\n      (ifelse-value (member? \"orig-color\"    [ \"orig-color\" ])    [ orig-color ]       [ \"\" ])\n      (ifelse-value (member? \"acc-tick-conuter\" [ \"acc-tick-conuter\" ]) [ acc-tick-conuter ] [ 0 ])\n    )\n    csv-append-line (csv-tab-join row)\n  ]\n  csv-append-line \"\"\nend\n\n\n;;5) LINKS section\nto csv-emit-links\n  csv-append-line \"LINKS:\"\n  csv-append-line (csv-tab-join\n    [ \"end1\" \"end2\" \"color\" \"label\" \"label-color\" \"hidden?\" \"breed\" \"thickness\" \"shape\" \"tie-mode\" ])\n\n  ask links [\n    let row (list [who] of end1 [who] of end2 color label label-color hidden? breed thickness shape tie-mode)\n    csv-append-line (csv-tab-join row)\n  ]\n  csv-append-line \"\"\nend\n\n\n\n\n; ;;6) PLOT “AverageSpeed” section (headers only for now)\nto csv-emit-plot-averagespeed\n  ;; ===== Desktop-style layout =====\n  csv-append-line \"PLOTS\"\n  csv-append-line \"AverageSpeed\"\n  csv-append-line \"AverageSpeed\"   ;; desktop puts the title again, not quoted\n\n  ;; properties header + values\n  csv-append-line (csv-tab-join\n    [ \"x min\" \"x max\" \"y min\" \"y max\" \"autoplot?\" \"current pen\" \"legend open?\" \"number of pens\" ])\n  csv-append-line (csv-tab-join\n    (list\n      avg_xmin avg_xmax avg_ymin avg_ymax\n      (ifelse-value avg_autoplot? [ \"TRUE\" ] [ \"FALSE\" ])\n      avg_current_pen\n      (ifelse-value avg_legend_open? [ \"TRUE\" ] [ \"FALSE\" ])\n      avg_num_pens))\n  csv-append-line \"\"  ;; blank row\n\n  ;; pen properties (per pen)\n  csv-append-line (csv-tab-join [ \"pen name\" \"pen down?\" \"mode\" \"interval\" \"color\" \"x\" ])\n  csv-append-line (csv-tab-join (list avg_penA_name \"TRUE\" avg_penA_mode avg_penA_interval avg_penA_color avg_penA_lastx))\n  csv-append-line (csv-tab-join (list avg_penB_name \"TRUE\" avg_penB_mode avg_penB_interval avg_penB_color avg_penB_lastx))\n  csv-append-line \"\"  ;; blank row\n\n  ;; dataset labels row: put names in col1 and col7, with 5 empties between\n  csv-append-line (csv-tab-join (list avg_penA_name \"\" \"\" \"\" \"\" \"\" avg_penB_name \"\"))\n\n  ;; NO extra blank line here — go straight to the 8-column header\n  csv-append-line (csv-tab-join [ \"x\" \"y\" \"color\" \"pen down?\" \"x\" \"y\" \"color\" \"pen down?\" ])\n\n  ;; side-by-side data rows (A = MaxSpeed, B = MinSpeed)\n  let nA length avg_penA_points\n  let nB length avg_penB_points\n  let n  max list nA nB\n  let i 0\n  while [ i < n ] [\n    let a (ifelse-value (i < nA) [ item i avg_penA_points ] [ [] ])\n    let b (ifelse-value (i < nB) [ item i avg_penB_points ] [ [] ])\n\n    let ax (ifelse-value (length a >= 1) [ item 0 a ] [ \"\" ])\n    let ay (ifelse-value (length a >= 2) [ item 1 a ] [ \"\" ])\n    let ac (ifelse-value (length a >= 3) [ item 2 a ] [ \"\" ])\n    let ad (ifelse-value (length a >= 4) [ item 3 a ] [ \"\" ])\n\n    let bx (ifelse-value (length b >= 1) [ item 0 b ] [ \"\" ])\n    let by (ifelse-value (length b >= 2) [ item 1 b ] [ \"\" ])\n    let bc (ifelse-value (length b >= 3) [ item 2 b ] [ \"\" ])\n    let bd (ifelse-value (length b >= 4) [ item 3 b ] [ \"\" ])\n\n    csv-append-line (csv-tab-join (list ax ay ac ad bx by bc bd))\n    set i i + 1\n  ]\nend\n\n\n\n\n\n;;7) One entry point to build the whole INIT file - 7) Build everything\nto csv-build-init-file\n  csv-clear\n  csv-emit-globals\n  csv-emit-turtles\n  csv-emit-patches\n  csv-emit-links\n  csv-emit-plot-averagespeed\nend\n\n\n\n\n\n\n; *** NetLogo 4.1RC6 Model Copyright Notice ***\n;\n; This activity and associated models and materials were created as part of the projects:\n; PARTICIPATORY SIMULATIONS: NETWORK-BASED DESIGN FOR SYSTEMS LEARNING IN\n; CLASSROOMS and/or INTEGRATED SIMULATION AND MODELING ENVIRONMENT.\n; The project gratefully acknowledges the support of the\n; National Science Foundation (REPP & ROLE programs) --\n; grant numbers REC #9814682 and REC-0126227.\n;\n; Copyright 1999 by Uri Wilensky & Walter Stroup.  All rights reserved.\n;\n; Permission to use, modify or redistribute this model is hereby granted,\n; provided that both of the following requirements are followed:\n; a) this copyright notice is included.\n; b) this model will not be redistributed for profit without permission\n;    from the copyright holders.\n; Contact the copyright holders for appropriate licenses for redistribution for\n; profit.\n;\n; If you mention this model in an academic publication, we ask that you\n; include citations for the model itself and for the NetLogo software.\n;\n; To cite the model, please use:\n; Wilensky, U. and Stroup, W. (1999).  NetLogo HubNet Disease model.\n; http://ccl.northwestern.edu/netlogo/models/HubNetDisease.\n; Center for Connected Learning and Computer-Based Modeling,\n; Northwestern University, Evanston, IL.\n;\n; To cite NetLogo, please use:\n; Wilensky, U. (1999). NetLogo. Center for Connected Learning and\n; Computer-Based Modeling, Northwestern University, Evanston, IL.\n; http://ccl.northwestern.edu/netlogo.\n;\n; In other publications, please use:\n; Copyright 1999 Uri Wilensky and Walter Stroup.  All rights reserved.\n; See http://ccl.northwestern.edu/netlogo/models/HubNetDisease\n; for terms of use.\n;\n; *** End of NetLogo 4.1RC6 Model Copyright Notice ***\n@#$#@#$#@\nGRAPHICS-WINDOW\n194\n12\n908\n472\n-1\n-1\n6.3604\n1\n10\n1\n1\n1\n0\n0\n0\n1\n-55\n55\n-35\n35\n1\n1\n1\nticks\n30.0\n\nBUTTON\n10\n12\n93\n64\nSetup\nsetup\nNIL\n1\nT\nOBSERVER\nNIL\nS\nNIL\nNIL\n1\n\nBUTTON\n97\n12\n181\n64\nGo\ngo\nT\n1\nT\nOBSERVER\nNIL\nG\nNIL\nNIL\n1\n\nSLIDER\n7\n65\n179\n98\nnumber-of-cars\nnumber-of-cars\n1\n200\n65.0\n1\n1\nNIL\nHORIZONTAL\n\nSLIDER\n8\n143\n180\n176\nradius\nradius\n11\n30\n26.0\n1\n1\nNIL\nHORIZONTAL\n\nSLIDER\n928\n15\n1100\n48\nInitialSpeed\nInitialSpeed\n0\n100\n100.0\n1\n1\nNIL\nHORIZONTAL\n\nSLIDER\n926\n55\n1098\n88\nacceleration\nacceleration\n0\n2\n1.0\n0.1\n1\nNIL\nHORIZONTAL\n\nSLIDER\n928\n94\n1100\n127\ndeceleration\ndeceleration\n0\n2\n1.0\n0.1\n1\nNIL\nHORIZONTAL\n\nPLOT\n1119\n11\n1478\n203\nAverageSpeed\nticks\nSpeed\n0.0\n10.0\n0.0\n50.0\ntrue\ntrue\n\"\" \"\"\nPENS\n\"MaxSpeed\" 1.0 0 -13345367 true \"\" \"\"\n\"MinSpeed\" 1.0 0 -10899396 true \"\" \"\"\n\nSWITCH\n933\n446\n1095\n479\nShowSlowestPoint?\nShowSlowestPoint?\n1\n1\n-1000\n\nSLIDER\n931\n361\n1103\n394\nMaxSpeed\nMaxSpeed\n0\n100\n100.0\n1\n1\nNIL\nHORIZONTAL\n\nSLIDER\n931\n403\n1103\n436\nallowance\nallowance\n0\n20\n1.0\n1\n1\nNIL\nHORIZONTAL\n\nSLIDER\n931\n283\n1103\n316\nspeed-parameter\nspeed-parameter\n0\n15\n5.0\n1\n1\nNIL\nHORIZONTAL\n\nSWITCH\n931\n206\n1071\n239\nallow-accident?\nallow-accident?\n0\n1\n-1000\n\nSLIDER\n931\n322\n1103\n355\nextra-lane-length\nextra-lane-length\n0\n40\n22.0\n1\n1\nNIL\nHORIZONTAL\n\nSWITCH\n930\n168\n1111\n201\nandroids-change-lane?\nandroids-change-lane?\n1\n1\n-1000\n\nSLIDER\n1342\n385\n1484\n418\nchange-lane-x-of-100\nchange-lane-x-of-100\n0\n99\n99.0\n1\n1\nNIL\nHORIZONTAL\n\nMONITOR\n1111\n383\n1234\n428\nRun Time (Seconds)\nRunTime\n0\n1\n11\n\nSLIDER\n928\n130\n1100\n163\nDistanceFromCar\nDistanceFromCar\n1\n6\n4.0\n1\n1\nNIL\nHORIZONTAL\n\nINPUTBOX\n1241\n384\n1341\n444\nRequiredLaps\n1.0\n1\n0\nNumber\n\nMONITOR\n1111\n431\n1234\n476\naverage speed\nmean [speed] of students\n0\n1\n11\n\nBUTTON\n13\n202\n86\n253\nZoomIn\nset ServerZoom-radius ServerZoom-radius - 1\\n      if ServerZoom-radius < 1 [ set ServerZoom-radius 1 ]\\n      ask students[\\n       set zoom-radius ServerZoom-radius\\n      ]\\n\nNIL\n1\nT\nOBSERVER\nNIL\nNIL\nNIL\nNIL\n1\n\nBUTTON\n87\n202\n169\n253\nZoomOut\n;    if command = \\\"ZoomOut\\\"\\n\\n      set ServerZoom-radius ServerZoom-radius + 1\\n      if ServerZoom-radius > 30 [ set ServerZoom-radius 30]\\n        ask students[\\n       set zoom-radius ServerZoom-radius\\n      ]\\n \nNIL\n1\nT\nOBSERVER\nNIL\nNIL\nNIL\nNIL\n1\n\nSLIDER\n7\n103\n179\n136\nnumber-of-trucks\nnumber-of-trucks\n1\n200\n1.0\n1\n1\nNIL\nHORIZONTAL\n\nSWITCH\n931\n245\n1073\n278\nspeed-limit?\nspeed-limit?\n1\n1\n-1000\n\n@#$#@#$#@\n## WHAT IS IT?\n\nA HubNet Simulation is a tool allowing teachers to run interactive online simulations in a classroom. The HubNet simulation is devided into to roles: Teacher and users. The teacher condeucts the simulation (instructions, advice, scenario etc.), and the students simulate that scenario.\n\nThis HubNet model simulates the movement of cars along a dual-lane highway. The cars are devided into 'Androids' and 'Students'. Each 'Android car' follows a simple set of rules: it slows down (decelerates) if there is a car close ahead, and speeds up (accelerates) if there isn't. All androids have the same look to it. Each 'Student car' is unique to a specific hubNet user, and follows the user's insturction regarding Acceleration and Deceleration.\n\nThe Simulation shows how individual driver's decision, although can appear to 'better' the situation, just 'worsten' it in the overall picture.\nThis simulation is an 'upgrade' to previous road models: extra lanes are added, and Cars are able to switch between lanes.\n\n## HOW TO USE IT\n\nTeacher: Follow these directions to setup the HubNet activity.\nMake sure that there are enough cars selected (NUMBER-OF-CARS slider) for all the students.\nCheck all other sliders and switches (instructions below) according to desired scenario.\n\nSelect a name for the Server and Press START to wait for clients.\nA list with all connected clients will be shown (CTRL+SHIFT+H to reopen).\nPress the SETUP button.\n\nClients: Open up a HubNet Client on your machine and input the IP Address of Teacher's computer, type your user name in the user name box and press ENTER.\n\nTeacher: Once everyone is logged in and has a car, the simulation is ready to begin.\nOnce everyone is ready, start the simulation by pressing the GO button.\n\nTeacher: To run the activity again with the same group, stop the model by pressing the GO button, if it is on.  Change the values of the sliders and switches to the values you want for the new run.  Press the SETUP button.  Once everyone is ready, restart the simulation by pressing the GO button.\n\nTeacher: To start the simulation over with a new group, stop the model by pressing the GO button, if it is on, press the RESET button in the Control Center and follow these instructions again from the beginning.\n\n## TEACHER'S CONTROLS\n\nButtons:\n\nSETUP - generates a new highway based on the current RADIUS and NUMBER-OF-CARS values.  This also clears all the plots.\nGO - runs the simulation indefinitely\n\nSliders:\n\nNUMBER-OF-CARS - sets the number of cars in the simulation (you must press the SETUP button to see the change)\nRADIUS - sets the radius of the circle in which the cars go.\nINITIALSPEED - sets the initial speed of the cars is defined by: random(1..initial)\nACCELERATION - sets the acceleration rate of the andorids.\nDECELERATION - sets the deceleration rate of the andorids.\nMAXSPEED - sets the maximum speed for the cars.\nSPEED-PARAMETER - the amount the speed changes for the users on each click on  SPEED UP.\nEXTRA-LANE-LENGH - sets the lenth of the extra (third) lane.\nALLOWENCE - sets the difference between a SLOW car and a FAST car (see SHOW-SLOWEST-POINT? below)\nCHANGE-LANE-X-OF-100 - sets the android tendecy to change lanes (precentage) if ANDROIDS-CHANGE-LANE? switch is on\n\nSwitches:\n\nSHOW-SLOWEST-POINT? - colors the slowest cars in same color (according to tendency)\nANDROIDS-CHANGE-LANE? - toggles android lane changes.\nALLOW-ACCIDENT? - toggles car crashing.\n\nPlots:\n\nAVERAGE SPEED - displays the average speed of cars over time\n\n## CLIENT'S CONTROLS\n\nAfter logging in, the client interface will appear for the students:\n\nButtons:\n\nSPEED UP - Speed client's car up by SPEED-PARAMETER.\nSPEED DOWN - Slow client's car down by SPEED-PARAMETER.\nRIGHT / LEFT - Tries to change lane to the right or to the left. if no lane avelible on that side or another car occuping the space, the client will recieve a NO SPACE warning on the MESSEGE monitor. (there is no affect on the car).\nZOON IN / ZOOM OUT - Changes the view of the Client from close-by to full view.\n\nMonitors\n\nYOU ARE A:- The graphical description of clients car.\nMESSEGE - Recieves messeges from the Teacher and from the simulation.\nSPEED - The Current speed of the client's car.\nNAME - The name of the client. will be shown above the car.\n\n## THINGS TO NOTICE\n\nTraffic jams can start from small \"seeds.\"  These cars start with random positions and random speeds. If some cars are clustered together, they will move slowly, causing cars behind them to slow down, and a traffic jam forms.\n\nEven though all of the cars are moving forward, the traffic jams tend to move backwards. This behavior is common in wave phenomena: the behavior of the group is often very different from the behavior of the individuals that make up the group.\n\nThe plot shows three values as the model runs:\n- the fastest speed of any car (this doesn't exceed the speed limit!)\n- the slowest speed of any car\n- the speed of a single car (turtle 0), painted red so it can be watched.\nNotice not only the maximum and minimum, but also the variability -- the \"jerkiness\" of one vehicle.\n\nNotice that the default settings have cars decelerating much faster than they accelerate. This is typical of traffic flow models.\n\nEven though both ACCELERATION and DECELERATION are very small, the cars can achieve high speeds as these values are added or subtracted at each tick.\n\n## THINGS TO TRY\n\nIn this model there are three variables that can affect the tendency to create traffic jams: the initial NUMBER of cars, ACCELERATION, and DECELERATION. Look for patterns in how the three settings affect the traffic flow.  Which variable has the greatest effect?  Do the patterns make sense?  Do they seem to be consistent with your driving experiences?\n\nSet DECELERATION to zero.  What happens to the flow?  Gradually increase DECELERATION while the model runs.  At what point does the flow \"break down\"?\n\n## EXTENDING THE MODEL\n\nTry other rules for speeding up and slowing down.  Is the rule presented here realistic?   Are there other rules that are more accurate or represent better driving strategies?\n\nIn reality, different vehicles may follow different rules. Try giving different rules or ACCELERATION/DECELERATION values to some of the cars.  Can one bad driver mess things up?\n\nThe asymmetry between acceleration and deceleration is a simplified representation of different driving habits and response times. Can you explicitly encode these into the model?\n\nWhat could you change to minimize the chances of traffic jams forming?\n\nWhat could you change to make traffic jams move forward rather than backward?\n\nMake a model of two-lane traffic.\n\n## NETLOGO FEATURES\n\nThe plot shows both global values and the value for a single turtle, which helps one watch overall patterns and individual behavior at the same time.\n\nThe WATCH command is used to make it easier to focus on the red car.\n\n## RELATED MODELS\n\n\"Traffic\" (in StarLogoT) adds graphics, trucks, and a radar trap.\n\n\"Gridlock\" (a HubNet model which can be run as a participatory simulation) models traffic in a grid with many intersections.\n\n## CREDITS AND REFERENCES\n\nThis model was developed at the MIT Media Lab using CM StarLogo.  See Resnick, M. (1994) \"Turtles, Termites and Traffic Jams: Explorations in Massively Parallel Microworlds.\"  Cambridge, MA: MIT Press.  Adapted to StarLogoT, 1997, as part of the Connected Mathematics Project.  Adapted to NetLogo, 2001, as part of the Participatory Simulations Project.\n\nIf you mention this model in an academic publication, we ask that you include citations for the model itself and for the NetLogo software.\n\nTo cite the model, please use:\nWilensky, U. (1997).  NetLogo Traffic Basic model.  http://ccl.northwestern.edu/netlogo/models/TrafficBasic.  Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.\n\nTo cite NetLogo, please use:\nWilensky, U. (1999). NetLogo. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL. http://ccl.northwestern.edu/netlogo.\n\nIn other publications, please use:\nCopyright 1997 Uri Wilensky.  All rights reserved.  See http://ccl.northwestern.edu/netlogo/models/TrafficBasic for terms of use.\n@#$#@#$#@\ndefault\ntrue\n0\nPolygon -7500403 true true 150 5 40 250 150 205 260 250\n\nairplane\ntrue\n0\nPolygon -7500403 true true 150 0 135 15 120 60 120 105 15 165 15 195 120 180 135 240 105 270 120 285 150 270 180 285 210 270 165 240 180 180 285 195 285 165 180 105 180 60 165 15\n\nambulance\nfalse\n0\nRectangle -7500403 true true 30 90 210 195\nPolygon -7500403 true true 296 190 296 150 259 134 244 104 210 105 210 190\nRectangle -1 true false 195 60 195 105\nPolygon -16777216 true false 238 112 252 141 219 141 218 112\nCircle -16777216 true false 234 174 42\nCircle -16777216 true false 69 174 42\nRectangle -1 true false 288 158 297 173\nRectangle -1184463 true false 289 180 298 172\nRectangle -2674135 true false 29 151 298 158\nLine -16777216 false 210 90 210 195\nRectangle -16777216 true false 83 116 128 133\nRectangle -16777216 true false 153 111 176 134\nLine -7500403 true 165 105 165 135\nRectangle -7500403 true true 14 186 33 195\nLine -13345367 false 45 135 75 120\nLine -13345367 false 75 135 45 120\nLine -13345367 false 60 112 60 142\n\narrow\ntrue\n0\nPolygon -7500403 true true 150 0 0 150 105 150 105 293 195 293 195 150 300 150\n\nbox\nfalse\n0\nPolygon -7500403 true true 150 285 285 225 285 75 150 135\nPolygon -7500403 true true 150 135 15 75 150 15 285 75\nPolygon -7500403 true true 15 75 15 225 150 285 150 135\nLine -16777216 false 150 285 150 135\nLine -16777216 false 150 135 15 75\nLine -16777216 false 150 135 285 75\n\nbug\ntrue\n0\nCircle -7500403 true true 96 182 108\nCircle -7500403 true true 110 127 80\nCircle -7500403 true true 110 75 80\nLine -7500403 true 150 100 80 30\nLine -7500403 true 150 100 220 30\n\nbus\nfalse\n0\nPolygon -7500403 true true 15 206 15 150 15 120 30 105 270 105 285 120 285 135 285 206 270 210 30 210\nRectangle -16777216 true false 36 126 231 159\nLine -7500403 false 60 135 60 165\nLine -7500403 false 60 120 60 165\nLine -7500403 false 90 120 90 165\nLine -7500403 false 120 120 120 165\nLine -7500403 false 150 120 150 165\nLine -7500403 false 180 120 180 165\nLine -7500403 false 210 120 210 165\nLine -7500403 false 240 135 240 165\nRectangle -16777216 true false 15 174 285 182\nCircle -16777216 true false 48 187 42\nRectangle -16777216 true false 240 127 276 205\nCircle -16777216 true false 195 187 42\nLine -7500403 false 257 120 257 207\n\nbutterfly\ntrue\n0\nPolygon -7500403 true true 150 165 209 199 225 225 225 255 195 270 165 255 150 240\nPolygon -7500403 true true 150 165 89 198 75 225 75 255 105 270 135 255 150 240\nPolygon -7500403 true true 139 148 100 105 55 90 25 90 10 105 10 135 25 180 40 195 85 194 139 163\nPolygon -7500403 true true 162 150 200 105 245 90 275 90 290 105 290 135 275 180 260 195 215 195 162 165\nPolygon -16777216 true false 150 255 135 225 120 150 135 120 150 105 165 120 180 150 165 225\nCircle -16777216 true false 135 90 30\nLine -16777216 false 150 105 195 60\nLine -16777216 false 150 105 105 60\n\ncar\nfalse\n0\nPolygon -7500403 true true 300 180 279 164 261 144 240 135 226 132 213 106 203 84 185 63 159 50 135 50 75 60 0 150 0 165 0 225 300 225 300 180\nCircle -16777216 true false 180 180 90\nCircle -16777216 true false 30 180 90\nPolygon -16777216 true false 162 80 132 78 134 135 209 135 194 105 189 96 180 89\nCircle -7500403 true true 47 195 58\nCircle -7500403 true true 195 195 58\n\ncar side\nfalse\n0\nPolygon -7500403 true true 19 147 11 125 16 105 63 105 99 79 155 79 180 105 243 111 266 129 253 149\nCircle -16777216 true false 43 123 42\nCircle -16777216 true false 194 124 42\nPolygon -16777216 true false 101 87 73 108 171 108 151 87\nLine -8630108 false 121 82 120 108\nPolygon -1 true false 242 121 248 128 266 129 247 115\nRectangle -16777216 true false 12 131 28 143\n\ncar top\ntrue\n0\nPolygon -7500403 true true 151 8 119 10 98 25 86 48 82 225 90 270 105 289 150 294 195 291 210 270 219 225 214 47 201 24 181 11\nPolygon -16777216 true false 210 195 195 210 195 135 210 105\nPolygon -16777216 true false 105 255 120 270 180 270 195 255 195 225 105 225\nPolygon -16777216 true false 90 195 105 210 105 135 90 105\nPolygon -1 true false 205 29 180 30 181 11\nLine -7500403 false 210 165 195 165\nLine -7500403 false 90 165 105 165\nPolygon -16777216 true false 121 135 180 134 204 97 182 89 153 85 120 89 98 97\nLine -16777216 false 210 90 195 30\nLine -16777216 false 90 90 105 30\nPolygon -1 true false 95 29 120 30 119 11\n\ncircle\nfalse\n0\nCircle -7500403 true true 0 0 300\n\ncircle 2\nfalse\n0\nCircle -7500403 true true 0 0 300\nCircle -16777216 true false 30 30 240\n\ncow\nfalse\n0\nPolygon -7500403 true true 200 193 197 249 179 249 177 196 166 187 140 189 93 191 78 179 72 211 49 209 48 181 37 149 25 120 25 89 45 72 103 84 179 75 198 76 252 64 272 81 293 103 285 121 255 121 242 118 224 167\nPolygon -7500403 true true 73 210 86 251 62 249 48 208\nPolygon -7500403 true true 25 114 16 195 9 204 23 213 25 200 39 123\n\ncylinder\nfalse\n0\nCircle -7500403 true true 0 0 300\n\ndot\nfalse\n0\nCircle -7500403 true true 90 90 120\n\nface happy\nfalse\n0\nCircle -7500403 true true 8 8 285\nCircle -16777216 true false 60 75 60\nCircle -16777216 true false 180 75 60\nPolygon -16777216 true false 150 255 90 239 62 213 47 191 67 179 90 203 109 218 150 225 192 218 210 203 227 181 251 194 236 217 212 240\n\nface neutral\nfalse\n0\nCircle -7500403 true true 8 7 285\nCircle -16777216 true false 60 75 60\nCircle -16777216 true false 180 75 60\nRectangle -16777216 true false 60 195 240 225\n\nface sad\nfalse\n0\nCircle -7500403 true true 8 8 285\nCircle -16777216 true false 60 75 60\nCircle -16777216 true false 180 75 60\nPolygon -16777216 true false 150 168 90 184 62 210 47 232 67 244 90 220 109 205 150 198 192 205 210 220 227 242 251 229 236 206 212 183\n\nfish\nfalse\n0\nPolygon -1 true false 44 131 21 87 15 86 0 120 15 150 0 180 13 214 20 212 45 166\nPolygon -1 true false 135 195 119 235 95 218 76 210 46 204 60 165\nPolygon -1 true false 75 45 83 77 71 103 86 114 166 78 135 60\nPolygon -7500403 true true 30 136 151 77 226 81 280 119 292 146 292 160 287 170 270 195 195 210 151 212 30 166\nCircle -16777216 true false 215 106 30\n\nflag\nfalse\n0\nRectangle -7500403 true true 60 15 75 300\nPolygon -7500403 true true 90 150 270 90 90 30\nLine -7500403 true 75 135 90 135\nLine -7500403 true 75 45 90 45\n\nflower\nfalse\n0\nPolygon -10899396 true false 135 120 165 165 180 210 180 240 150 300 165 300 195 240 195 195 165 135\nCircle -7500403 true true 85 132 38\nCircle -7500403 true true 130 147 38\nCircle -7500403 true true 192 85 38\nCircle -7500403 true true 85 40 38\nCircle -7500403 true true 177 40 38\nCircle -7500403 true true 177 132 38\nCircle -7500403 true true 70 85 38\nCircle -7500403 true true 130 25 38\nCircle -7500403 true true 96 51 108\nCircle -16777216 true false 113 68 74\nPolygon -10899396 true false 189 233 219 188 249 173 279 188 234 218\nPolygon -10899396 true false 180 255 150 210 105 210 75 240 135 240\n\nhouse\nfalse\n0\nRectangle -7500403 true true 45 120 255 285\nRectangle -16777216 true false 120 210 180 285\nPolygon -7500403 true true 15 120 150 15 285 120\nLine -16777216 false 30 120 270 120\n\nleaf\nfalse\n0\nPolygon -7500403 true true 150 210 135 195 120 210 60 210 30 195 60 180 60 165 15 135 30 120 15 105 40 104 45 90 60 90 90 105 105 120 120 120 105 60 120 60 135 30 150 15 165 30 180 60 195 60 180 120 195 120 210 105 240 90 255 90 263 104 285 105 270 120 285 135 240 165 240 180 270 195 240 210 180 210 165 195\nPolygon -7500403 true true 135 195 135 240 120 255 105 255 105 285 135 285 165 240 165 195\n\nline\ntrue\n0\nLine -7500403 true 150 0 150 300\n\nline half\ntrue\n0\nLine -7500403 true 150 0 150 150\n\npentagon\nfalse\n0\nPolygon -7500403 true true 150 15 15 120 60 285 240 285 285 120\n\nperson\nfalse\n0\nCircle -7500403 true true 110 5 80\nPolygon -7500403 true true 105 90 120 195 90 285 105 300 135 300 150 225 165 300 195 300 210 285 180 195 195 90\nRectangle -7500403 true true 127 79 172 94\nPolygon -7500403 true true 195 90 240 150 225 180 165 105\nPolygon -7500403 true true 105 90 60 150 75 180 135 105\n\nplant\nfalse\n0\nRectangle -7500403 true true 135 90 165 300\nPolygon -7500403 true true 135 255 90 210 45 195 75 255 135 285\nPolygon -7500403 true true 165 255 210 210 255 195 225 255 165 285\nPolygon -7500403 true true 135 180 90 135 45 120 75 180 135 210\nPolygon -7500403 true true 165 180 165 210 225 180 255 120 210 135\nPolygon -7500403 true true 135 105 90 60 45 45 75 105 135 135\nPolygon -7500403 true true 165 105 165 135 225 105 255 45 210 60\nPolygon -7500403 true true 135 90 120 45 150 15 180 45 165 90\n\nsheep\nfalse\n0\nRectangle -7500403 true true 151 225 180 285\nRectangle -7500403 true true 47 225 75 285\nRectangle -7500403 true true 15 75 210 225\nCircle -7500403 true true 135 75 150\nCircle -16777216 true false 165 76 116\n\nsquare\nfalse\n0\nRectangle -7500403 true true 30 30 270 270\n\nsquare 2\nfalse\n0\nRectangle -7500403 true true 30 30 270 270\nRectangle -16777216 true false 60 60 240 240\n\nstar\nfalse\n0\nPolygon -7500403 true true 151 1 185 108 298 108 207 175 242 282 151 216 59 282 94 175 3 108 116 108\n\ntarget\nfalse\n0\nCircle -7500403 true true 0 0 300\nCircle -16777216 true false 30 30 240\nCircle -7500403 true true 60 60 180\nCircle -16777216 true false 90 90 120\nCircle -7500403 true true 120 120 60\n\ntree\nfalse\n0\nCircle -7500403 true true 118 3 94\nRectangle -6459832 true false 120 195 180 300\nCircle -7500403 true true 65 21 108\nCircle -7500403 true true 116 41 127\nCircle -7500403 true true 45 90 120\nCircle -7500403 true true 104 74 152\n\ntriangle\nfalse\n0\nPolygon -7500403 true true 150 30 15 255 285 255\n\ntriangle 2\nfalse\n0\nPolygon -7500403 true true 150 30 15 255 285 255\nPolygon -16777216 true false 151 99 225 223 75 224\n\ntruck\ntrue\n0\nRectangle -6459832 true false 90 105 210 240\nRectangle -1 true false 105 45 195 90\nRectangle -1 false false 120 135 135 135\nRectangle -1 true false 120 120 135 225\nRectangle -1 true false 165 120 180 225\nRectangle -6459832 true false 60 90 240 270\nRectangle -1 false false 75 45 225 90\nRectangle -1 true false 75 45 225 90\nPolygon -2064490 true false 105 45 105 15 150 0 195 15 195 45\n\ntrucktop\ntrue\n3\nPolygon -7500403 true false 151 8 119 10 98 25 86 48 82 225 90 270 105 289 150 294 195 291 210 270 219 225 214 47 201 24 181 11\nPolygon -16777216 true false 210 195 195 210 195 135 210 105\nPolygon -16777216 true false 105 255 120 270 180 270 195 255 195 225 105 225\nPolygon -16777216 true false 90 195 105 210 105 135 90 105\nPolygon -1 true false 205 29 180 30 181 11\nLine -7500403 false 210 165 195 165\nLine -7500403 false 90 165 105 165\nPolygon -16777216 true false 121 135 180 134 204 97 182 89 153 85 120 89 98 97\nLine -16777216 false 210 90 195 30\nLine -16777216 false 90 90 105 30\nPolygon -1 true false 95 29 120 30 119 11\nRectangle -16777216 true false 105 165 195 225\nRectangle -7500403 true false 90 30 120 75\nRectangle -16777216 false false 75 15 90 30\nRectangle -16777216 true false 90 15 135 75\nRectangle -7500403 true false 75 105 210 255\nRectangle -1 true false 90 60 210 105\nRectangle -16777216 true false 90 15 225 315\n\nturtle\ntrue\n0\nPolygon -10899396 true false 215 204 240 233 246 254 228 266 215 252 193 210\nPolygon -10899396 true false 195 90 225 75 245 75 260 89 269 108 261 124 240 105 225 105 210 105\nPolygon -10899396 true false 105 90 75 75 55 75 40 89 31 108 39 124 60 105 75 105 90 105\nPolygon -10899396 true false 132 85 134 64 107 51 108 17 150 2 192 18 192 52 169 65 172 87\nPolygon -10899396 true false 85 204 60 233 54 254 72 266 85 252 107 210\nPolygon -7500403 true true 119 75 179 75 209 101 224 135 220 225 175 261 128 261 81 224 74 135 88 99\n\nvan side\nfalse\n0\nPolygon -7500403 true true 26 147 18 125 36 61 161 61 177 67 195 90 242 97 262 110 273 129 260 149\nCircle -16777216 true false 43 123 42\nCircle -16777216 true false 194 124 42\nPolygon -16777216 true false 45 68 37 95 183 96 169 69\nLine -7500403 true 62 65 62 103\nLine -7500403 true 115 68 120 100\nPolygon -1 true false 271 127 258 126 257 114 261 109\nRectangle -16777216 true false 19 131 27 142\n\nwheel\nfalse\n0\nCircle -7500403 true true 3 3 294\nCircle -16777216 true false 30 30 240\nLine -7500403 true 150 285 150 15\nLine -7500403 true 15 150 285 150\nCircle -7500403 true true 120 120 60\nLine -7500403 true 216 40 79 269\nLine -7500403 true 40 84 269 221\nLine -7500403 true 40 216 269 79\nLine -7500403 true 84 40 221 269\n\nx\nfalse\n0\nPolygon -7500403 true true 270 75 225 30 30 225 75 270\nPolygon -7500403 true true 30 75 75 30 270 225 225 270\n@#$#@#$#@\nNetLogo 6.4.0\n@#$#@#$#@\n@#$#@#$#@\n@#$#@#$#@\n@#$#@#$#@\nVIEW\n189\n10\n1193\n632\n0\n0\n0\n1\n1\n1\n1\n1\n0\n1\n1\n1\n-55\n55\n-35\n35\n\nBUTTON\n25\n238\n88\n271\nleft\nNIL\nNIL\n1\nT\nOBSERVER\nNIL\nJ\n\nBUTTON\n98\n238\n161\n271\nright\nNIL\nNIL\n1\nT\nOBSERVER\nNIL\nL\n\nMONITOR\n17\n131\n152\n180\nMessege\nNIL\n3\n1\n\nBUTTON\n61\n182\n126\n215\nspeed up\nNIL\nNIL\n1\nT\nOBSERVER\nNIL\nI\n\nBUTTON\n61\n293\n124\n326\nspeed down\nNIL\nNIL\n1\nT\nOBSERVER\nNIL\nK\n\nMONITOR\n18\n358\n148\n407\nspeed\nNIL\n0\n1\n\nMONITOR\n16\n75\n154\n124\nLaps\nNIL\n0\n1\n\nMONITOR\n17\n21\n154\n70\nOverallTIme\nNIL\n1\n1\n\nBUTTON\n62\n524\n156\n557\nSwitch halo\nNIL\nNIL\n1\nT\nOBSERVER\nNIL\nNIL\n\n@#$#@#$#@\ndefault\n0.0\n-0.2 1 1.0 0.0\n0.0 1 1.0 0.0\n0.2 1 1.0 0.0\nlink direction\ntrue\n0\nLine -7500403 true 150 150 90 180\nLine -7500403 true 150 150 210 180\n@#$#@#$#@\n0\n@#$#@#$#@\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"}